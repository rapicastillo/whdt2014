<!DOCTYPE html>
<html>
<head>
    <link rel='stylesheet' type='text/css' href='style/bootstrap.css'/>
    <link rel='stylesheet' type='text/css' href='style/bootstrap-theme.css'/>
    <link rel='stylesheet' type='text/css' href='style/custom.css'/>
    <link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700,800'/>

    <style>
      body { font-family: 'Open Sans'; }
    </style>

</head>
<body>
  <!-- div id="activity-corner">
    <div id="background-animations">
      <div id="title-page-bg"></div>
      <div id="slide-2-mode-needed-background" class="background-animation-gray">
      </div>
    </div>
    <div id="foreground-animations">

      <div id="slide-2-more-needed-animations"
          class="animation-foreground-item container-fluid"
          data-anchor-target="#slide-2-more-needed"
          data-target="#slide-2-more-needed"

          data-top-top="transform:translate(0,0%)"
          data-top-bottom="transform:translate(0,-100%)"
      >
           <div id="title-slides-area" class="fluid-container" style="width: 100%; height: 100%">
            <div class="row" style="width: 100%; height: 100%">
              <div class="col-md-4"></div>
              <div class="col-md-2" style="width:8%">
                <div id="stats-area" class="clstxt">
                  <h3><span>In 2004</span></h3>
                </div>
              </div>
              <div class="col-md-1" >
                <div id="first-needs-graph" class="firstgrph">
                  <h4>$<span  data-final-count="3" data-type="int">3</span>B</h4>
                </div>
              </div>
              <div class="col-md-2" style="width:22%;">
                <div id="stats-area"  class="clstxt">
                  <h3><span>was requested. In 2014</span></h3>
                </div>
              </div>
              <div class="col-md-1" >
                <div id="second-needs-graph" class="secondgrph">
                  <h4>$<span  data-final-count="19.2" data-type="float">19.2</span>B</h4>
                </div>
              </div>
              <div class="col-md-2">
                <div id="stats-area"  class="clstxt2">
                  <div class="clssubtxt1"><h4>more than six times the request a decade ago</h4></div>
                  <div class="clssubtxt2"><h3><span>was needed</span></h3></div>
                </div>
              </div>
            </div>
          </div>
      </div>
    </div>
  </div>
 -->
<div id="navigation" class="navbar navbar-fixed-top"></div>

<div id="actual-stage">
  <div id="slide-1-more-needed" class="slide-item" title="Slide 1">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-12">
          <h1 class="title-item">1. THE CONTEXT OF HUMANITARIAN CRISES IS CHANGING</h1>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <p>The funding requireents of inter-agency appeals have increasesd by 640% since 2004 to a record $19.2.</p>
          <p>In the same amount of time, the number of poeple targeted has more than doubled.</p>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
        </div>
      </div>
    </div>
  </div>

  <div id="slide-2-more-needed" class="slide-item" title="Slide 2" data-50-top-top="..." data-emit-events>
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-12">
          <h1 class="title-item">THE CONTEXT OF HUMANITARIAN CRISES IS CHANGING</h1>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <p>The funding requireents of inter-agency appeals have increasesd by 640% since 2004 to a record $19.2.</p>
          <p>In the same amount of time, the number of poeple targeted has more than doubled.</p>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
        </div>
      </div>
    </div>

    <div id="slide-2-more-needed-animations"
        class="animation-foreground-item container-fluid"
        data-anchor-target="#slide-2-more-needed" data-target="#slide-2-more-needed" data-top-top="transform:translate(0,0%)" data-top-bottom="transform:translate(0,-100%)">
           <div id="title-slides-area" class="fluid-container" style="width: 100%; height: 100%">
            <div class="row" style="width: 100%; height: 100%">
              <div class="col-md-4"></div>
              <div class="col-md-2" style="width:8%">
                <div id="stats-area" class="clstxt">
                  <h3><span>In 2004</span></h3>
                </div>
              </div>
              <div class="col-md-1">
                <div id="first-needs-graph" class="firstgrph">
                  <h4>$<span data-final-count="3" data-type="int">3</span>B</h4>
                </div>
              </div>
              <div class="col-md-2" style="width:22%;">
                <div id="stats-area" class="clstxt">
                  <h3><span>was requested. In 2014</span></h3>
                </div>
              </div>
              <div class="col-md-1">
                <div id="second-needs-graph" class="secondgrph">
                  <h4>$<span data-final-count="19.2" data-type="float">19.2</span>B</h4>
                </div>
              </div>
              <div class="col-md-2">
                <div id="stats-area" class="clstxt2">
                  <div class="clssubtxt1"><h4>more than six times the request a decade ago</h4></div>
                  <div class="clssubtxt2"><h3><span>was needed</span></h3></div>
                </div>
              </div>
            </div>
          </div>
      </div>


  </div>

   <div id="slide-3-more-needed" class="slide-item" title="Slide 3" data-emit-events>
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-12">
          <h1 class="title-item">X. THE CONTEXT OF HUMANITARIAN CRISES IS CHANGING</h1>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <p>The funding requireents of inter-agency appeals have increasesd by 640% since 2004 to a record $19.2.</p>
          <p>In the same amount of time, the number of poeple targeted has more than doubled.</p>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
        </div>
      </div>
    </div>
  </div>

</div>

  <script type='text/javascript' src='js/jquery.min.js'></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script src="js/skrollr.min.js"></script>

  <script type="text/javascript" src="js/jquery.min.js"></script>
  <script type="text/javascript" src="js/TweenMax.min.js"></script>
  <script type="text/javascript" src="js/jquery.history.js"></script>
  <script type="text/javascript" src="js/kalfinSlides.js"></script>


  <script type="text/javascript">
    // var ga ;
    $(function() {

      $("#actual-stage .slide-item, #activity-corner").width($(window).width()).height($(window).height());

      $("#slide-2-more-needed-animations").on("s2NeedsSlides", function(event, direction) {

        console.log(event);

        var bar_graph = $("#first-needs-graph");
        var bar_graph2 = $("#second-needs-graph");

        if (direction == "down")
        {
          bar_graph.css("height", "0%");
          bar_graph.delay(1000).animate({ height: "20%" }, 2000);
          bar_graph2.css("height", "0%");
          bar_graph2.delay(1000).animate({ height: "85%" }, 2000);
          $("#title-slides-area #stats-area").delay(1000).css("opacity", 0).animate({ "opacity" : 1, bottom : "+=0px" }, 2000);

          $("#title-slides-area").find("[data-final-count]").each(function () {
            var $this = $(this);
            console.log($this);
            jQuery({ Counter: 0 }).animate({
                  Counter: parseFloat($this.attr("data-final-count")) }, {
                  duration: 3000,
                  easing: 'swing',
                  step: function () {

                  if ($this.attr("data-type") == "int")
                  { $this.text( Math.ceil(this.Counter) ); }
                  else if ($this.attr("data-type") == "float")
                  { $this.text( Math.ceil(this.Counter * 10) / 10 ); }
                  }
              });

            });
          }
          else
          {
            bar_graph.stop(true, true).animate({"height": "0%"}, 1000);
            bar_graph2.stop(true, true).animate({"height": "0%"}, 1000);
            $("#title-slides-area #stats-area").stop(true, true).animate({opacity: 0}, 1000);
          }
      });


      var slide1 = new TimelineMax({paused: true});
          slide1.call(function() {
            console.log("XXX");
            $("#slide-2-more-needed-animations").trigger("s2NeedsSlides", "up");
          });

      var $s2 = $("#slide-2-more-needed-animations");
      var slide2 = new TimelineMax({paused: true, onComplete: function() { console.log("XY"); }});
          // slide2.call(function() {
          //   console.log("XXX");
          //   $("#slide-2-more-needed-animations").delay(3000).trigger("s2NeedsSlides", "down");
          // });

      var slide3 = new TimelineMax({paused: true});
          slide3.call(function() {
            console.log("XXX");
            $("#slide-2-more-needed-animations").trigger("s2NeedsSlides", "up");
          });


       // Needs...
      $("#actual-stage").kalfinSlides({
        useEffects  : true,
        slideTime   : 1.5,
        parallaxTimeStagger : 0,
        titleDevider: " | ",
        animations  : [
          slide1, slide2, slide3
        ]
      });


      // var s = skrollr.init({
      //     keyframe: function(element,name, direction) {
      //       console.log("XXX", element, name, direction);
      //         $(element).trigger(name, direction);
      //     }
      //     ,
      //     edgeStrategy: 'set',
      //       easing: {
      //         WTF: Math.random
      //       }
      // });

    });

  </script>
  <script type="text/javascript">
  <!--//--><![CDATA[//><!--
  var _gaq = _gaq || [];_gaq.push(["_setAccount", "UA-1433955-15"]);_gaq.push(["_trackPageview"]);(function() {ga = document.createElement("script");ga.type = "text/javascript";ga.async = true;ga.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";var s = document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga, s);})();
  //--><!]]>
  </script>
</body>
</html>
